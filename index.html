<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CVC Bakery</title>
    <!-- Google Fonts Import -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;600;700&family=Sarabun:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* --- CSS Code (style.css content) --- */
        :root {
            /* Color Palette */
            --primary-pink: #ff69b4; /* Deep Pink */
            --light-pink: #ffb6c1; /* Light Pink */
            --lighter-pink: #ffe0e6; /* Very Light Pink */
            --accent-green: #28a745; /* Success Green */
            --accent-red: #dc3545; /* Danger Red */
            --dark-grey: #333;
            --medium-grey: #555;
            --light-grey: #f8f8f8;
            --white: #fff;
            --cream: #fefefe; /* For modal/content background */
        }

        body {
            font-family: 'Sarabun', sans-serif; /* ฟอนต์หลักสำหรับเนื้อหา */
            margin: 0;
            padding: 0;
            background-color: var(--light-grey);
            color: var(--dark-grey);
        }

        /* Header Sticky Effect */
        header {
            /* Updated background with a subtle gradient for uniqueness */
            background: linear-gradient(90deg, #ff99bb 0%, #ffc0cb 100%); /* Softer, more inviting gradient */
            color: var(--white);
            padding: 1rem 0;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); /* Stronger shadow */
            transition: all 0.3s ease-in-out;
        }

        header h1 {
            margin: 0;
            font-family: 'Prompt', sans-serif;
            font-weight: 700;
            letter-spacing: 2px; /* Increased letter spacing for title */
            font-size: 2.8em; /* Larger title */
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3); /* More prominent text shadow */
            display: flex; /* For aligning icon and text */
            justify-content: center;
            align-items: center;
        }
        header h1 .logo-icon {
            font-size: 0.8em; /* Adjust icon size relative to text */
            margin-right: 10px; /* Space between icon and text */
            animation: bounceIn 0.8s ease-out forwards; /* Animation for logo */
        }
        @keyframes bounceIn {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); }
        }


        nav ul {
            list-style: none;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        nav ul li {
            margin: 0 10px; /* Adjusted margin */
        }

        nav ul li a {
            /* Styles for navigation buttons */
            color: var(--white);
            text-decoration: none;
            font-weight: 500;
            font-family: 'Sarabun', sans-serif;
            padding: 8px 15px; /* Button-like padding */
            border-radius: 25px; /* Pill shape */
            background-color: rgba(255, 255, 255, 0.2); /* Subtle transparent background */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Subtle shadow */
            transition: all 0.3s ease; /* Smooth transitions for all properties */
            display: flex; /* For aligning icon and text in cart */
            align-items: center;
            justify-content: center;
        }

        nav ul li a:hover {
            background: linear-gradient(45deg, #ffdeeb, #ffc0cb); /* Lighter gradient on hover */
            color: var(--primary-pink); /* Pink text on hover */
            transform: translateY(-3px); /* More pronounced lift */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.25); /* Deeper shadow on hover */
            text-shadow: none; /* Remove text shadow on hover for clarity */
        }

        nav ul li a.active {
            /* Styles for the active (current) page button */
            background: linear-gradient(45deg, var(--primary-pink), #ff4d88); /* Stronger pink gradient for active */
            color: var(--white);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3); /* Even deeper shadow for active */
            transform: translateY(-1px); /* Slightly lifted but less than hover */
            font-weight: 600; /* Bolder for active */
        }
        nav ul li a.active:hover { /* Maintain active style on hover */
            background: linear-gradient(45deg, #ff4d88, var(--primary-pink)); /* Reverse gradient on hover */
            transform: translateY(-3px); /* Still lift on hover */
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.35);
        }


        /* Cart Icon in Header */
        .cart-icon-container {
            position: relative;
            display: inline-block;
            margin-left: 8px; /* Space between "ตะกร้าสินค้า" text and icon */
            font-size: 1.4em; /* Larger icon */
            transition: transform 0.3s ease; /* Smooth transform on hover */
        }
        .cart-icon-container:hover {
            transform: scale(1.1); /* Pop effect on hover */
        }
        .cart-count {
            background-color: var(--primary-pink);
            color: var(--white);
            border-radius: 50%;
            padding: 2px 7px;
            font-size: 0.75em;
            position: absolute;
            top: -8px;
            right: -8px;
            min-width: 20px;
            text-align: center;
            font-weight: bold;
            transition: transform 0.2s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        /* Animation for cart count */
        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        .cart-count.pop-animation {
            animation: pop 0.3s ease-out;
        }


        /* Navbar Dropdown */
        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: var(--cream);
            min-width: 180px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.25);
            z-index: 1;
            border-radius: 8px;
            padding: 8px 0;
            top: calc(100% + 10px);
            left: 50%;
            transform: translateX(-50%);
            animation: fadeInScale 0.3s ease-out forwards;
            transform-origin: top center;
        }
        @keyframes fadeInScale {
            from { opacity: 0; transform: translateX(-50%) scale(0.9); }
            to { opacity: 1; transform: translateX(-50%) scale(1); }
        }

        .dropdown-content a {
            color: var(--dark-grey);
            padding: 12px 20px;
            text-decoration: none;
            display: block;
            text-align: left;
            font-weight: 400;
            font-family: 'Sarabun', sans-serif;
            transition: background-color 0.2s ease, color 0.2s ease;
            border-radius: 0; /* Reset border-radius for dropdown items */
            background-color: transparent; /* Reset background */
            box-shadow: none; /* Reset shadow */
            transform: none; /* Reset transform */
        }

        .dropdown-content a:hover {
            background-color: var(--lighter-pink);
            color: var(--primary-pink);
            border-radius: 5px;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        main {
            padding: 20px;
            max-width: 1000px; /* Adjusted max-width */
            margin: 20px auto;
            background-color: var(--white);
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.15);
            border-radius: 12px;
        }

        /* Page Section visibility */
        .page-section {
            display: none;
            padding: 20px 0;
        }

        .page-section.active {
            display: block;
        }

        h2 {
            font-family: 'Prompt', sans-serif;
            font-weight: 600;
            color: var(--primary-pink);
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.05);
        }
        h3 {
            font-family: 'Prompt', sans-serif;
            font-weight: 500;
        }

        /* Product Grid */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 25px;
        }

        .product-item {
            border: 1px solid #eee;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            background-color: var(--white);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            overflow: hidden;
        }

        .product-item:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.25);
        }

        .product-item img {
            max-width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: 6px;
            margin-bottom: 15px;
            transition: transform 0.4s ease;
        }
        .product-item:hover img {
            transform: scale(1.1);
        }


        .product-item h3 {
            color: var(--medium-grey);
            margin-top: 10px;
            margin-bottom: 8px;
            font-size: 1.4em;
        }

        .product-item p {
            font-size: 1em;
            color: #777;
            font-family: 'Sarabun', sans-serif;
            margin-bottom: 12px;
        }

        .product-item .price {
            font-weight: 700;
            color: var(--primary-pink);
            font-size: 1.2em;
            display: block;
            margin-bottom: 20px;
            font-family: 'Prompt', sans-serif;
        }

        .add-to-cart {
            background: linear-gradient(45deg, var(--primary-pink), #ff4d88);
            color: var(--white);
            border: none;
            padding: 12px 25px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.1em;
            font-family: 'Sarabun', sans-serif;
            font-weight: 600;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .add-to-cart:hover {
            background: linear-gradient(45deg, #ff4d88, var(--primary-pink));
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }
        /* Add to Cart button click animation */
        @keyframes buttonClick {
            0% { transform: scale(1); }
            50% { transform: scale(0.95); }
            100% { transform: scale(1); }
        }
        .add-to-cart.clicked {
            animation: buttonClick 0.2s ease-out;
        }


        /* Cart Styles */
        #cart-items {
            border: 1px dashed #ccc;
            padding: 20px;
            min-height: 120px;
            margin-bottom: 25px;
            border-radius: 10px;
            background-color: #fefefe;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
            flex-wrap: wrap;
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .cart-item-info {
            flex-grow: 1;
            margin-right: 15px;
        }

        .cart-item-info h4 {
            margin: 0 0 8px 0;
            color: var(--medium-grey);
            font-size: 1.2em;
            font-family: 'Sarabun', sans-serif;
            font-weight: 500;
        }

        .cart-item-info p {
            margin: 0;
            font-size: 1em;
            color: #777;
            font-family: 'Sarabun', sans-serif;
        }

        .cart-item-quantity {
            display: flex;
            align-items: center;
            margin-top: 5px;
            margin-bottom: 5px;
        }

        .cart-item-quantity button {
            background-color: var(--lighter-pink);
            color: var(--primary-pink);
            border: 1px solid var(--primary-pink);
            width: 35px;
            height: 35px;
            border-radius: 5px;
            font-size: 1.4em;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .cart-item-quantity button:hover {
            background-color: var(--primary-pink);
            color: var(--white);
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .cart-item-quantity input {
            width: 50px;
            text-align: center;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin: 0 8px;
            padding: 8px 0;
            font-family: 'Sarabun', sans-serif;
            font-size: 1.1em;
        }

        .remove-from-cart {
            background-color: var(--accent-red);
            color: var(--white);
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            font-family: 'Sarabun', sans-serif;
            font-weight: 500;
            box-shadow: 0 2px 5px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
            margin-left: auto;
        }

        .remove-from-cart:hover {
            background-color: #c82333;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.25);
        }

        .cart-summary {
            text-align: right;
            margin-top: 25px;
            font-family: 'Sarabun', sans-serif;
        }

        #cart-total {
            font-size: 1.8em;
            font-weight: 700;
            color: var(--primary-pink);
            font-family: 'Prompt', sans-serif;
        }

        #checkout-btn {
            background: linear-gradient(45deg, var(--accent-green), #218838);
            color: var(--white);
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.2em;
            margin-top: 20px;
            font-family: 'Sarabun', sans-serif;
            font-weight: 600;
            box-shadow: 0 5px 12px rgba(0, 0, 0, 0.25);
            transition: all 0.3s ease;
        }

        #checkout-btn:hover {
            background: linear-gradient(45deg, #218838, var(--accent-green));
            transform: translateY(-3px);
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.35);
        }

        footer {
            background-color: var(--dark-grey);
            color: var(--white);
            text-align: center;
            padding: 25px 0;
            margin-top: 50px;
            font-family: 'Sarabun', sans-serif;
            border-top-left-radius: 12px;
            border-top-right-radius: 12px;
        }

        footer h3 {
            color: var(--light-pink);
            margin-top: 0;
            font-family: 'Prompt', sans-serif;
        }

        footer p {
            margin: 8px 0;
            font-size: 1em;
        }

        /* --- General Animations & Effects --- */

        /* Smooth Scroll for Nav Links */
        html {
            scroll-behavior: smooth;
        }

        /* --- Full Width Banner Section --- */
        .full-width-banner {
            background: linear-gradient(90deg, #ffb6c1 0%, #ffdeeb 100%); /* Light pink to lighter pink gradient */
            color: var(--dark-grey);
            text-align: center;
            padding: 30px 20px;
            margin-bottom: 20px; /* Space between banner and main content */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            font-family: 'Sarabun', sans-serif;
        }
        .full-width-banner p {
            font-size: 1.5em;
            font-weight: 500;
            margin: 0;
            line-height: 1.5;
            color: var(--medium-grey);
        }
        .full-width-banner p strong {
            color: var(--primary-pink);
            font-weight: 700;
            font-family: 'Prompt', sans-serif;
        }


        /* --- Carousel Styles --- */
        .hero-carousel {
            position: relative;
            width: 100%;
            overflow: hidden;
            border-radius: 12px;
            margin-bottom: 50px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .carousel-inner {
            display: flex;
            transition: transform 0.6s ease-in-out;
        }

        .carousel-item {
            min-width: 100%;
            box-sizing: border-box;
            position: relative;
        }

        .carousel-item img {
            width: 100%;
            height: 450px;
            object-fit: cover;
            display: block;
        }

        .carousel-caption {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--white);
            text-align: center;
            background-color: rgba(0, 0, 0, 0.6);
            padding: 30px 40px;
            border-radius: 10px;
            backdrop-filter: blur(8px);
            font-size: 1.1em;
            font-family: 'Sarabun', sans-serif;
            opacity: 0;
            animation: fadeIn 0.8s ease-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translate(-50%, -40%); }
            to { opacity: 1; transform: translate(-50%, -50%); }
        }


        .carousel-caption h2 {
            color: var(--white);
            margin-bottom: 12px;
            font-size: 2.8em;
            font-family: 'Prompt', sans-serif;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .carousel-caption p {
            font-size: 1.2em;
            margin-bottom: 25px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }

        .carousel-control-prev,
        .carousel-control-next {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(0, 0, 0, 0.4);
            color: var(--white);
            border: none;
            padding: 12px 18px;
            cursor: pointer;
            font-size: 2.5em;
            z-index: 10;
            border-radius: 50%;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .carousel-control-prev:hover,
        .carousel-control-next:hover {
            background-color: rgba(0, 0, 0, 0.6);
            transform: translateY(-50%) scale(1.05);
        }

        .carousel-control-prev {
            left: 20px;
        }

        .carousel-control-next {
            right: 20px;
        }

        .carousel-indicators {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            z-index: 10;
        }

        .indicator-dot {
            width: 12px;
            height: 12px;
            background-color: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            border: 1px solid rgba(255,255,255,0.8);
        }

        .indicator-dot.active {
            background-color: var(--white);
            transform: scale(1.3);
        }

        /* --- Scroll Reveal Animation --- */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(60px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .product-item.reveal,
        .section-reveal.reveal,
        .testimonial-item.reveal,
        .speciality-item.reveal,
        .feature-item.reveal, /* New class for features */
        .step-item.reveal, /* New class for steps */
        .full-width-banner.reveal /* New class for the banner */
        {
            animation: fadeInUp 0.9s ease-out forwards;
            opacity: 0;
        }

        /* --- "Add to Cart" Feedback Animation --- */
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        @keyframes slideOutRight {
            from {
                opacity: 1;
                transform: translateX(0);
            }
            to {
                opacity: 0;
                transform: translateX(100%);
            }
        }

        .cart-feedback {
            position: fixed;
            bottom: 25px;
            right: 25px;
            background-color: var(--accent-green);
            color: var(--white);
            padding: 12px 25px;
            border-radius: 8px;
            opacity: 0;
            visibility: hidden;
            z-index: 2000;
            font-family: 'Sarabun', sans-serif;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            animation: slideOutRight 0.3s forwards;
        }

        .cart-feedback.show {
            visibility: visible;
            animation: slideInRight 0.6s ease-out forwards;
        }

        /* Back to Top Button */
        #back-to-top {
            display: none;
            position: fixed;
            bottom: 35px;
            right: 35px;
            background-color: var(--primary-pink);
            color: var(--white);
            border: none;
            border-radius: 50%;
            width: 55px;
            height: 55px;
            font-size: 2.2em;
            line-height: 55px;
            text-align: center;
            cursor: pointer;
            box-shadow: 0 5px 12px rgba(0, 0, 0, 0.25);
            transition: all 0.3s ease;
            z-index: 999;
            opacity: 0;
        }

        #back-to-top:hover {
            background-color: #ff1493;
            transform: translateY(-5px);
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.35);
        }

        #back-to-top.show {
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 1;
        }

        /* Loading Spinner */
        .spinner-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 5000;
            transition: opacity 0.6s ease;
            opacity: 1;
            visibility: visible;
        }

        .spinner-container.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .spinner {
            border: 8px solid #f3f3f3;
            border-top: 8px solid var(--primary-pink);
            border-radius: 50%;
            width: 70px;
            height: 70px;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* --- New Sections on Home Page --- */
        .welcome-section {
            text-align: center;
            padding: 50px 30px;
            background-color: var(--white);
            margin-bottom: 50px;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
        }

        .welcome-section h2 {
            margin-bottom: 25px;
            font-size: 3em;
            color: var(--primary-pink);
            font-family: 'Prompt', sans-serif;
            font-weight: 700;
        }

        .welcome-section p {
            font-size: 1.2em;
            line-height: 1.8;
            color: var(--medium-grey);
            max-width: 900px;
            margin: 0 auto;
        }

        /* Why Choose Us Section */
        .why-choose-us-section {
            margin-bottom: 50px;
        }
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }
        .feature-item {
            background-color: var(--white);
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            opacity: 0;
        }
        .feature-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.15);
        }
        .feature-item .icon {
            font-size: 3em; /* Larger emoji icon */
            margin-bottom: 15px;
            color: var(--primary-pink); /* Pink color for icons */
            display: block;
        }
        .feature-item h3 {
            font-size: 1.5em;
            color: var(--primary-pink);
            margin-bottom: 10px;
        }
        .feature-item p {
            font-size: 1em;
            color: #666;
        }

        /* How It Works Section */
        .how-it-works-section {
            margin-bottom: 50px;
            background-color: var(--lighter-pink); /* Light pink background */
            padding: 40px 20px;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
        }
        .how-it-works-section h2 {
            color: var(--primary-pink);
        }
        .steps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            counter-reset: step-counter; /* Initialize counter */
        }
        .step-item {
            background-color: var(--white);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            text-align: center;
            position: relative;
            opacity: 0;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .step-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }
        .step-item::before {
            counter-increment: step-counter; /* Increment counter */
            content: counter(step-counter); /* Display counter */
            position: absolute;
            top: -15px; /* Position above the box */
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--primary-pink);
            color: var(--white);
            border-radius: 50%;
            width: 35px;
            height: 35px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.2em;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            border: 2px solid var(--white); /* White border around number */
        }
        .step-item .step-icon {
            font-size: 2.5em; /* Larger emoji icon */
            margin-top: 10px; /* Space from number */
            margin-bottom: 10px;
            display: block;
        }
        .step-item h3 {
            font-size: 1.3em;
            color: var(--dark-grey);
            margin-bottom: 8px;
        }
        .step-item p {
            font-size: 0.9em;
            color: #777;
        }


        .specialities-section {
            margin-bottom: 50px;
        }

        .specialities-section h2 {
            font-family: 'Prompt', sans-serif;
            font-weight: 600;
        }

        .specialities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 35px;
            margin-bottom: 40px;
        }

        .speciality-item {
            text-align: center;
            background-color: var(--white);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            opacity: 0;
        }

        .speciality-item:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .speciality-item img {
            width: 110px;
            height: 110px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 20px;
            border: 4px solid var(--primary-pink);
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .speciality-item h3 {
            color: var(--primary-pink);
            font-size: 1.6em;
            margin-bottom: 12px;
            font-family: 'Prompt', sans-serif;
            font-weight: 600;
        }

        .speciality-item p {
            font-size: 1.05em;
            color: #666;
            font-family: 'Sarabun', sans-serif;
        }

        .testimonials-section {
            background-color: var(--lighter-pink);
            padding: 50px 30px;
            border-radius: 12px;
            margin-bottom: 50px;
            text-align: center;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
        }

        .testimonials-section h2 {
            color: var(--primary-pink);
            margin-bottom: 40px;
            font-family: 'Prompt', sans-serif;
            font-weight: 700;
        }

        .testimonial-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
        }

        .testimonial-item {
            background-color: var(--white);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            text-align: left;
            position: relative;
            opacity: 0;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .testimonial-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.2);
        }

        .testimonial-item p {
            font-style: italic;
            color: var(--medium-grey);
            margin-bottom: 20px;
            line-height: 1.6;
            font-family: 'Sarabun', sans-serif;
            font-size: 1.05em;
        }

        .testimonial-author {
            font-weight: 700;
            color: var(--primary-pink);
            font-size: 1.2em;
            font-family: 'Prompt', sans-serif;
        }

        .testimonial-author::before {
            content: "— ";
        }

        .cta-section {
            text-align: center;
            padding: 60px 30px;
            background: linear-gradient(135deg, var(--primary-pink), #ff4d88);
            color: var(--white);
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .cta-section h2 {
            color: var(--white);
            font-size: 3.2em;
            margin-bottom: 25px;
            font-family: 'Prompt', sans-serif;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .cta-section p {
            font-size: 1.4em;
            margin-bottom: 40px;
            font-family: 'Sarabun', sans-serif;
            line-height: 1.7;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }

        .btn-primary {
            background: linear-gradient(45deg, #fffacd, #ffe0e6);
            color: var(--primary-pink);
            padding: 15px 35px;
            border-radius: 30px;
            font-size: 1.2em;
            font-weight: 700;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            display: inline-block;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary:hover {
            background: linear-gradient(45deg, #ffe0e6, #fffacd);
            transform: translateY(-5px);
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.35);
            color: #ff1493;
        }

        /* --- Product Quick View Modal --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 3000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.7);
            justify-content: center;
            align-items: center;
            padding: 20px;
            animation: fadeInBackground 0.3s ease-out;
        }
        @keyframes fadeInBackground {
            from { background-color: rgba(0,0,0,0); }
            to { background-color: rgba(0,0,0,0.7); }
        }


        .modal-content {
            background-color: var(--cream);
            margin: auto;
            padding: 35px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
            max-width: 900px;
            width: 90%;
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            position: relative;
            animation: zoomIn 0.3s ease-out;
            font-family: 'Sarabun', sans-serif;
        }

        @keyframes zoomIn {
            from { transform: scale(0.7); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .modal-close-btn {
            color: #888;
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease, transform 0.2s ease;
        }

        .modal-close-btn:hover,
        .modal-close-btn:focus {
            color: var(--dark-grey);
            transform: rotate(90deg);
        }

        .modal-image-container {
            flex: 1;
            min-width: 300px;
            text-align: center;
        }
        .modal-image-container img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .modal-details-container {
            flex: 2;
            min-width: 300px;
        }
        .modal-details-container h3 {
            font-size: 2.5em;
            color: var(--primary-pink);
            margin-top: 0;
            margin-bottom: 15px;
            font-family: 'Prompt', sans-serif;
            font-weight: 700;
        }
        .modal-details-container .price {
            font-size: 2.2em;
            color: var(--accent-green);
            font-weight: bold;
            margin-bottom: 20px;
            display: block;
            font-family: 'Prompt', sans-serif;
        }
        .modal-details-container p {
            font-size: 1.15em;
            line-height: 1.7;
            color: var(--medium-grey);
            margin-bottom: 25px;
        }
        .modal-details-container .modal-quantity-selector {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
        }
        .modal-details-container .modal-quantity-selector button {
            background-color: var(--lighter-pink);
            color: var(--primary-pink);
            border: 1px solid var(--primary-pink);
            width: 40px;
            height: 40px;
            border-radius: 6px;
            font-size: 1.6em;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .modal-details-container .modal-quantity-selector button:hover {
            background-color: var(--primary-pink);
            color: var(--white);
            transform: translateY(-1px);
        }
        .modal-details-container .modal-quantity-selector input {
            width: 60px;
            text-align: center;
            border: 1px solid #ccc;
            border-radius: 6px;
            margin: 0 12px;
            padding: 10px 0;
            font-size: 1.2em;
            font-family: 'Sarabun', sans-serif;
        }
        .modal-details-container .add-to-cart {
            width: auto;
            padding: 15px 40px;
            font-size: 1.2em;
        }


        /* --- Custom Confirmation Modal --- */
        .confirmation-modal {
            display: none;
            position: fixed;
            z-index: 3000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.7);
            justify-content: center;
            align-items: center;
            padding: 20px;
            animation: fadeInBackground 0.3s ease-out;
        }

        .confirmation-modal-content {
            background-color: var(--cream);
            margin: auto;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
            max-width: 450px;
            width: 90%;
            text-align: center;
            position: relative;
            animation: zoomIn 0.3s ease-out;
            font-family: 'Sarabun', sans-serif;
        }

        .confirmation-modal-content h3 {
            color: var(--primary-pink);
            font-size: 2em;
            margin-bottom: 25px;
            font-family: 'Prompt', sans-serif;
            font-weight: 600;
        }

        .confirmation-modal-content p {
            font-size: 1.2em;
            margin-bottom: 35px;
            line-height: 1.6;
        }

        .confirmation-modal-buttons button {
            padding: 12px 25px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.1em;
            margin: 0 15px;
            transition: all 0.3s ease;
            font-family: 'Sarabun', sans-serif;
            font-weight: 600;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }

        .confirmation-modal-buttons .confirm-yes {
            background-color: var(--accent-red);
            color: var(--white);
        }
        .confirmation-modal-buttons .confirm-yes:hover {
            background-color: #c82333;
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.25);
        }

        .confirmation-modal-buttons .confirm-no {
            background-color: #6c757d;
            color: var(--white);
        }
        .confirmation-modal-buttons .confirm-no:hover {
            background-color: #5a6268;
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.25);
        }

        /* --- Confetti Animation (Basic CSS) --- */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 4000;
            display: none;
        }

        .confetti {
            position: absolute;
            width: 12px;
            height: 12px;
            background-color: var(--primary-pink);
            opacity: 0;
            animation: fall 3s forwards;
            border-radius: 2px;
        }
        .confetti:nth-child(2n) { background-color: var(--light-pink); }
        .confetti:nth-child(3n) { background-color: var(--accent-green); }
        .confetti:nth-child(4n) { background-color: #ffd700; }
        .confetti:nth-child(5n) { background-color: #add8e6; }


        @keyframes fall {
            0% { transform: translateY(-100px) rotateZ(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotateZ(720deg); opacity: 0; }
        }


        /* Responsive adjustments */
        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
                letter-spacing: 1px;
            }
            header h1 .logo-icon {
                font-size: 0.7em;
                margin-right: 5px;
            }
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }
            nav ul li {
                margin: 5px 8px;
            }
            nav ul li a {
                font-size: 0.9em;
                padding: 6px 12px;
                border-radius: 20px;
            }
            nav ul li a.active {
                transform: translateY(-1px);
            }
            nav ul li a.active:hover {
                transform: translateY(-3px);
            }
            .cart-icon-container {
                font-size: 1em;
                margin-left: 0;
            }
            .cart-count {
                font-size: 0.65em;
                padding: 1px 6px;
                min-width: 18px;
            }
            .dropdown-content {
                min-width: 140px;
            }
            .dropdown-content a {
                padding: 8px 12px;
                font-size: 0.9em;
            }
            main {
                padding: 15px;
                margin: 15px auto;
                max-width: 95%; /* Adjusted for mobile */
            }
            h2 {
                font-size: 2em;
                margin-bottom: 20px;
            }
            .full-width-banner p {
                font-size: 1.1em;
            }
            .carousel-caption {
                padding: 15px;
                font-size: 0.8em;
            }
            .carousel-caption h2 {
                font-size: 1.6em;
            }
            .carousel-caption p {
                font-size: 0.9em;
            }
            .carousel-item img {
                height: 250px;
            }
            .carousel-control-prev, .carousel-control-next {
                font-size: 1.8em;
                padding: 8px 12px;
                left: 10px;
                right: 10px;
            }
            .carousel-indicators {
                bottom: 15px;
                gap: 8px;
            }
            .indicator-dot {
                width: 10px;
                height: 10px;
            }
            .product-grid {
                grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
                gap: 15px;
            }
            .product-item {
                padding: 12px;
            }
            .product-item img {
                height: 120px;
            }
            .product-item h3 {
                font-size: 1.1em;
            }
            .product-item p {
                font-size: 0.8em;
            }
            .product-item .price {
                font-size: 1em;
            }
            .add-to-cart {
                padding: 8px 15px;
                font-size: 0.9em;
            }
            .cart-feedback {
                bottom: 10px;
                right: 10px;
                padding: 8px 15px;
                font-size: 0.9em;
            }
            #back-to-top {
                width: 40px;
                height: 40px;
                font-size: 1.5em;
                bottom: 20px;
                right: 20px;
            }
            .welcome-section {
                padding: 30px 15px;
                margin-bottom: 30px;
            }
            .welcome-section h2 {
                font-size: 2em;
            }
            .welcome-section p {
                font-size: 0.95em;
            }
            /* New sections specific adjustments for mobile */
            .why-choose-us-section, .how-it-works-section {
                margin-bottom: 30px;
            }
            .features-grid { /* Ensure it stacks on mobile */
                grid-template-columns: 1fr;
                gap: 20px;
            }
            .feature-item, .step-item {
                padding: 15px;
            }
            .feature-item .icon {
                font-size: 2.5em;
            }
            .feature-item h3 {
                font-size: 1.2em;
            }
            .steps-grid { /* Ensure it stacks on mobile */
                grid-template-columns: 1fr;
                gap: 20px;
            }
            .step-item .step-icon {
                font-size: 2em;
            }
            .step-item h3 {
                font-size: 1.1em;
            }
            .specialities-section {
                margin-bottom: 30px;
            }
            .specialities-section h2 {
                font-size: 1.8em;
            }
            .specialities-grid {
                grid-template-columns: 1fr; /* Changed to single column */
                gap: 20px;
            }
            .speciality-item {
                padding: 20px;
            }
            .speciality-item img {
                width: 80px;
                height: 80px;
            }
            .speciality-item h3 {
                font-size: 1.3em;
            }
            .testimonials-section {
                padding: 30px 15px;
                margin-bottom: 30px;
            }
            .testimonials-section h2 {
                font-size: 1.8em;
            }
            .testimonial-grid {
                grid-template-columns: 1fr; /* Changed to single column */
                gap: 20px;
            }
            .testimonial-item {
                padding: 20px;
            }
            .testimonial-item p {
                font-size: 0.9em;
            }
            .testimonial-author {
                font-size: 1em;
            }
            .cta-section {
                padding: 40px 20px;
            }
            .cta-section h2 {
                font-size: 2.2em;
            }
            .cta-section p {
                font-size: 1.1em;
            }
            .btn-primary {
                padding: 10px 20px;
                font-size: 1em;
            }
            .cart-item-info {
                width: 100%;
                margin-right: 0;
                margin-bottom: 10px;
            }
            .cart-item-quantity {
                width: calc(50% - 5px);
                justify-content: center;
            }
            .remove-from-cart {
                width: calc(50% - 5px);
                margin-left: 0;
            }
            .modal-content {
                flex-direction: column;
                padding: 25px;
            }
            .modal-image-container, .modal-details-container {
                min-width: unset;
                width: 100%;
            }
            .modal-details-container h3 {
                font-size: 1.8em;
            }
            .modal-details-container .price {
                font-size: 1.5em;
            }
            .modal-details-container p {
                font-size: 1em;
            }
            .modal-details-container .modal-quantity-selector button {
                width: 30px;
                height: 30px;
                font-size: 1.2em;
            }
            .modal-details-container .modal-quantity-selector input {
                width: 40px;
                padding: 5px 0;
                font-size: 1em;
            }
            .modal-details-container .add-to-cart {
                padding: 10px 20px;
                font-size: 1em;
            }
            .confirmation-modal-content {
                padding: 25px;
            }
            .confirmation-modal-content h3 {
                font-size: 1.5em;
            }
            .confirmation-modal-content p {
                font-size: 1em;
            }
            .confirmation-modal-buttons button {
                padding: 8px 15px;
                font-size: 0.9em;
                margin: 0 8px;
            }
        }
    </style>
</head>
<body>
    <div id="loading-spinner" class="spinner-container hidden">
        <div class="spinner"></div>
        <p>กำลังโหลด...</p>
    </div>

    <header>
        <h1><span class="logo-icon">🧁</span> CVC Bakery</h1>
        <nav>
            <ul>
                <li><a href="#home" class="nav-link" data-section="home">หน้าแรก</a></li>
                <li><a href="#products" class="nav-link" data-section="products">สินค้าทั้งหมด</a></li>
                <li class="dropdown">
                    <a href="#" class="nav-link">หมวดหมู่</a>
                    <div class="dropdown-content">
                        <a href="#category-cakes" class="nav-link" data-section="category-cakes">เค้ก</a>
                        <a href="#category-cookies" class="nav-link" data-section="category-cookies">คุกกี้</a>
                        <a href="#category-pies" class="nav-link" data-section="category-pies">พาย</a>
                    </div>
                </li>
                <li>
                    <a href="#cart" class="nav-link" data-section="cart">
                        ตะกร้าสินค้า
                        <span class="cart-icon-container">
                            🛒 <span id="cart-count" class="cart-count">0</span>
                        </span>
                    </a>
                </li>
                <li><a href="#contact" class="nav-link" data-section="contact">ติดต่อเรา</a></li>
            </ul>
        </nav>
    </header>

    <!-- New Full-Width Banner Section -->
    <section class="full-width-banner section-reveal">
        <p>เรามุ่งมั่นสร้างสรรค์เบเกอรี่ด้วย <strong>ความรักและความใส่ใจ</strong> ในทุกขั้นตอน</p>
    </section>

    <main>
        <!-- ส่วนหน้าแรก (Home Page) -->
        <section id="home" class="page-section active">
            <!-- Hero Carousel -->
            <div class="hero-carousel section-reveal">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img id="carousel-img-1" src="แบรนเนอร์.png" alt="เบเกอรี่สดใหม่">
                        <div class="carousel-caption">
                            <h2>เบเกอรี่สดใหม่ทุกวัน</h2>
                            <p>หอมกรุ่นจากเตา พร้อมเสิร์ฟความอร่อยถึงมือคุณ</p>
                            <a href="#products" class="btn-primary nav-link" data-section="products">ดูเมนูทั้งหมด</a>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img id="carousel-img-2" src="แบรนเนอร์2.png" alt="โปรโมชั่น">
                        <div class="carousel-caption">
                            <h2>โปรโมชั่นพิเศษ!</h2>
                            <p>ลด 10% สำหรับทุกการสั่งซื้อครั้งแรก</p>
                            <a href="#products" class="btn-primary nav-link" data-section="products">สั่งซื้อเลย!</a>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img id="carousel-img-3" src="แบรนเนอร์3.png" alt="เค้กวันเกิด">
                        <div class="carousel-caption">
                            <h2>เค้กวันเกิดสั่งทำพิเศษ</h2>
                            <p>สร้างสรรค์เค้กในฝันของคุณ</p>
                            <a href="#contact" class="btn-primary nav-link" data-section="contact">ติดต่อเรา</a>
                        </div>
                    </div>
                </div>
                <button class="carousel-control-prev">‹</button>
                <button class="carousel-control-next">›</button>
                <div class="carousel-indicators"></div>
            </div>

            <!-- Welcome/About Us Section -->
            <div class="welcome-section section-reveal">
                <h2>ยินดีต้อนรับสู่ CVC Bakery!</h2>
                <p>เรามุ่งมั่นอบขนมปัง เค้ก และขนมอบแสนอร่อยสดใหม่จากเตาทุกวัน
                    ด้วยส่วนผสมที่ดีที่สุดและความใส่ใจในทุกขั้นตอน เพื่อส่งมอบความสุขผ่านรสชาติ
                    หอมหวานให้คุณและคนที่คุณรัก ไม่ว่าจะเป็นขนมสำหรับวันพิเศษ
                    หรือจะเป็นขนมทานเล่นในทุกๆ วัน เราก็มีพร้อมเสิร์ฟ</p>
                <p>สัมผัสประสบการณ์ความอร่อยที่ไม่เหมือนใครกับเราวันนี้!</p>
            </div>

            <!-- New Section: Why Choose Us? -->
            <div class="why-choose-us-section section-reveal">
                <h2>ทำไมต้องเลือกเรา?</h2>
                <div class="features-grid">
                    <div class="feature-item">
                        <span class="icon">✨</span>
                        <h3>วัตถุดิบคุณภาพพรีเมียม</h3>
                        <p>เราคัดสรรวัตถุดิบที่ดีที่สุด สดใหม่ทุกวัน เพื่อรสชาติที่เหนือกว่า</p>
                    </div>
                    <div class="feature-item">
                        <span class="icon">💖</span>
                        <h3>อบสดใหม่ทุกวัน</h3>
                        <p>ขนมทุกชิ้นอบใหม่จากเตาทุกวัน หอมกรุ่น พร้อมเสิร์ฟความสุข</p>
                    </div>
                    <div class="feature-item">
                        <span class="icon">🚚</span>
                        <h3>จัดส่งรวดเร็วทันใจ</h3>
                        <p>บริการจัดส่งถึงบ้านคุณอย่างรวดเร็วและปลอดภัย</p>
                    </div>
                    <div class="feature-item">
                        <span class="icon">🎁</span>
                        <h3>เหมาะสำหรับทุกโอกาส</h3>
                        <p>ไม่ว่าจะเป็นวันเกิด งานเลี้ยง หรือของขวัญ เรามีขนมที่เหมาะกับคุณ</p>
                    </div>
                </div>
            </div>

            <!-- New Section: How It Works -->
            <div class="how-it-works-section section-reveal">
                <h2>ขั้นตอนการสั่งซื้อ</h2>
                <div class="steps-grid">
                    <div class="step-item">
                        <span class="step-icon"> 🔍 </span>
                        <h3>เลือกสินค้า</h3>
                        <p>เลือกขนมที่คุณชื่นชอบจากเมนูหลากหลายของเรา</p>
                    </div>
                    <div class="step-item">
                        <span class="step-icon">🛒</span>
                        <h3>เพิ่มลงตะกร้า</h3>
                        <p>คลิกเพิ่มสินค้าลงในตะกร้าของคุณ</p>
                    </div>
                    <div class="step-item">
                        <span class="step-icon">💳</span>
                        <h3>ชำระเงิน</h3>
                        <p>ดำเนินการชำระเงินผ่านช่องทางที่ปลอดภัย</p>
                    </div>
                    <div class="step-item">
                        <span class="step-icon">🏡</span>
                        <h3>รอรับความอร่อย</h3>
                        <p>ขนมจะถูกจัดส่งตรงถึงหน้าบ้านคุณอย่างรวดเร็ว</p>
                    </div>
                </div>
            </div>

            <!-- Featured Products Section -->
            <div id="featured-products" class="section-reveal">
                <h2>สินค้าแนะนำ</h2>
                <div class="product-grid" id="featured-products-container">
                    <!-- สินค้าแนะนำจะถูกสร้างด้วย JavaScript -->
                </div>
            </div>

            <!-- Our Specialities Section -->
            <div class="specialities-section section-reveal">
                <h2>เมนูพิเศษของเรา</h2>
                <div class="specialities-grid">
                    <div class="speciality-item">
                        <img id="speciality-img-1" src="เค้ก.png" alt="เค้กวันเกิด">
                        <h3>เค้กวันเกิดปรับแต่งได้</h3>
                        <p>รังสรรค์เค้กในฝันของคุณให้เป็นจริงในทุกเทศกาล</p>
                    </div>
                    <div class="speciality-item">
                        <img id="speciality-img-2" src="RB0496_ImageBannerMobile_960x633_New_-7.jpg" alt="ครัวซองต์เนยสด">
                        <h3>ครัวซองต์เนยสด</h3>
                        <p>กรอบนอกนุ่มใน หอมเนยแท้ๆ คู่กับกาแฟแก้วโปรด</p>
                    </div>
                    <div class="speciality-item">
                        <img id="speciality-img-3" src="546fdd1a90edefcf7843de714a0eb6a0.jpg" alt="คุกกี้โฮมเมด">
                        <h3>คุกกี้โฮมเมดหลากรส</h3>
                        <p>คุกกี้สูตรลับเฉพาะของเรา เหมาะสำหรับทุกช่วงเวลา</p>
                    </div>
                </div>
            </div>

            <!-- Customer Testimonials Section -->
            <div class="testimonials-section section-reveal">
                <h2>เสียงจากลูกค้าของเรา</h2>
                <div class="testimonial-grid">
                    <div class="testimonial-item">
                        <p>"เค้กช็อกโกแลตอร่อยมากค่ะ หวานกำลังดี ไม่เลี่ยนเลย สั่งมาหลายครั้งแล้วไม่เคยผิดหวัง!"</p>
                        <span class="testimonial-author">คุณสมศรี</span>
                    </div>
                    <div class="testimonial-item">
                        <p>"คุกกี้เนยหอมมาก ลูกชายชอบมากเลยค่ะ สั่งทีไรหมดภายในวันเดียว แนะนำเลยค่ะ!"</p>
                        <span class="testimonial-author">คุณอรุณี</span>
                    </div>
                    <div class="testimonial-item">
                        <p>"ประทับใจพายแอปเปิ้ลมากๆ ครับ ไส้แน่น รสชาติกลมกล่อม ลงตัวที่สุดครับ"</p>
                        <span class="testimonial-author">คุณชลิต</span>
                    </div>
                </div>
            </div>

            <!-- Final Call to Action -->
            <div class="cta-section section-reveal">
                <h2>พร้อมสัมผัสความอร่อยแล้วหรือยัง?</h2>
                <p>เลือกเบเกอรี่ชิ้นโปรดของคุณแล้วให้เราส่งตรงถึงหน้าบ้าน</p>
                <a href="#products" class="btn-primary nav-link" data-section="products">เลือกซื้อสินค้าเลย!</a>
            </div>
        </section>

        <!-- ส่วนรายการสินค้าทั้งหมด (Products Page) -->
        <section id="products" class="page-section hidden">
            <h2>สินค้าเบเกอรี่ทั้งหมด</h2>
            <div class="product-grid" id="all-products-container">
                <!-- สินค้าทั้งหมดจะถูกสร้างด้วย JavaScript -->
            </div>
        </section>

        <!-- ส่วนหมวดหมู่ (Category Pages) -->
        <section id="category-cakes" class="page-section hidden">
            <h2>เค้กแสนอร่อย</h2>
            <div class="product-grid" id="cakes-products-container">
                <!-- สินค้าหมวดหมู่เค้กจะถูกสร้างด้วย JavaScript -->
            </div>
        </section>

        <section id="category-cookies" class="page-section hidden">
            <h2>คุกกี้กรอบหอม</h2>
            <div class="product-grid" id="cookies-products-container">
                <!-- สินค้าหมวดหมู่คุกกี้จะถูกสร้างด้วย JavaScript -->
            </div>
        </section>

        <section id="category-pies" class="page-section hidden">
            <h2>พายอบใหม่</h2>
            <div class="product-grid" id="pies-products-container">
                <!-- สินค้าหมวดหมู่พายจะถูกสร้างด้วย JavaScript -->
            </div>
        </section>

        <!-- ส่วนตะกร้าสินค้า (Cart Page) -->
        <section id="cart" class="page-section hidden">
            <h2>สินค้าในตะกร้าของคุณ</h2>
            <div id="cart-items">
                <p>ไม่มีสินค้าในตะกร้า</p>
            </div>
            <div class="cart-summary">
                <p>ยอดรวม: <span id="cart-total">0</span> บาท</p>
                <button id="checkout-btn">สั่งซื้อ</button>
            </div>
        </section>

        <!-- ส่วนติดต่อเรา (Contact Section) -->
        <section id="contact" class="page-section hidden">
            <h2>ติดต่อเรา</h2>
            <p>เรายินดีให้บริการทุกท่าน!</p>
            <p><strong>ที่อยู่:</strong> 123 ถนนเบเกอรี่, เขตอร่อย, ฉะเชิงเทรา 24140</p>
            <p><strong>โทร:</strong> 099-029-4518</p>
            <p><strong>อีเมล:</strong> 68319100051@cvc-cha.ac.th</p>
            <p><strong>เวลาทำการ:</strong> จันทร์-เสาร์ 09:00 - 18:00 น.</p>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 CVC Bakery. สงวนลิขสิทธิ์.</p>
    </footer>

    <button id="back-to-top" title="กลับขึ้นไปด้านบน">↑</button>

    <!-- Product Quick View Modal Structure -->
    <div id="product-modal" class="modal">
        <div class="modal-content">
            <span class="modal-close-btn">&times;</span>
            <div class="modal-image-container">
                <img id="modal-product-image" src="" alt="Product Image">
            </div>
            <div class="modal-details-container">
                <h3 id="modal-product-name"></h3>
                <span class="price" id="modal-product-price"></span>
                <p id="modal-product-description"></p>
                <div class="modal-quantity-selector">
                    <button id="modal-quantity-minus">-</button>
                    <input type="number" id="modal-quantity-input" value="1" min="1">
                    <button id="modal-quantity-plus">+</button>
                </div>
                <button class="add-to-cart" id="modal-add-to-cart-btn" data-id="">เพิ่มลงตะกร้า</button>
            </div>
        </div>
    </div>

    <!-- Custom Confirmation Modal for deletion -->
    <div id="confirmation-modal" class="confirmation-modal">
        <div class="confirmation-modal-content">
            <h3>ยืนยันการดำเนินการ</h3>
            <p id="confirmation-message">คุณแน่ใจหรือไม่ว่าต้องการลบสินค้าชิ้นนี้ออกจากตะกร้า?</p>
            <div class="confirmation-modal-buttons">
                <button class="confirm-yes">ใช่</button>
                <button class="confirm-no">ไม่</button>
            </div>
        </div>
    </div>

    <!-- Confetti Container -->
    <div id="confetti-container" class="confetti-container"></div>

    <script>
        /* --- JavaScript Code (script.js content) --- */
        document.addEventListener('DOMContentLoaded', () => {
            // Product Data (simulated from Database)
            // 'img' property now directly holds the image URL
            const productsData = [
                { id: 1, name: "เค้กช็อกโกแลต", price: 250, category: "cake", img: "strawberries-chocolate-cake.webp", description: "เค้กช็อกโกแลตเข้มข้น เนื้อนุ่มละมุนลิ้น หวานกำลังดี เหมาะสำหรับทุกโอกาสพิเศษ" },
                { id: 2, name: "คุ้กกี้เนย", price: 120, category: "cookie", img: "คุกกี้เนย.jpg", description: "คุ้กกี้เนยสดแท้ หอมกรุ่น กรอบนอกนุ่มใน ทานคู่กับชาหรือกาแฟก็อร่อย" },
                { id: 3, name: "พายแอปเปิ้ล", price: 180, category: "pie", img: "พาย.jpg", description: "พายแอปเปิ้ลโฮมเมด ไส้แอปเปิ้ลแน่นๆ รสชาติเปรี้ยวหวานลงตัว แป้งพายกรอบอร่อย" },
                { id: 4, name: "บราวนี่ฟัดจ์", price: 90, category: "cake", img: "บราวนี่.jpg", description: "บราวนี่เนื้อหนึบหนับ เข้มข้นช็อกโกแลตพรีเมียม หวานมันกลมกล่อม" },
                { id: 5, name: "มาการอง", price: 60, category: "cookie", img: "กามารอง.jpg", description: "มาการองหลากสีสัน รสชาติหอมหวาน เนื้อสัมผัสกรอบนอกนุ่มใน ละลายในปาก" },
                { id: 6, name: "เค้กเรดเวลเวท", price: 300, category: "cake", img: "เค้ก.webp", description: "เค้กเรดเวลเวทสีแดงสดใส เนื้อเค้กนุ่มละมุนลิ้น เข้ากันดีกับครีมชีสฟรอสติ้ง" },
                { id: 7, name: "ทาร์ตผลไม้", price: 150, category: "pie", img: "ทาร์ต.jpg", description: "ทาร์ตกรอบๆ ราดด้วยคัสตาร์ดเนื้อเนียน และท็อปด้วยผลไม้สดตามฤดูกาล" },
                { id: 8, name: "คุ้กกี้ช็อกโกแลตชิพ", price: 130, category: "cookie", img: "คุ้กกี้ช้อค.jpg", description: "คุ้กกี้คลาสสิก อบใหม่ทุกวัน ช็อกโกแลตชิพเข้มข้นเต็มคำ" },
            ];

            // Elements
            const navLinks = document.querySelectorAll('.nav-link');
            const pageSections = document.querySelectorAll('.page-section');
            const featuredProductsContainer = document.getElementById('featured-products-container');
            const allProductsContainer = document.getElementById('all-products-container');
            const cakesProductsContainer = document.getElementById('cakes-products-container');
            const cookiesProductsContainer = document.getElementById('cookies-products-container');
            const piesProductsContainer = document.getElementById('pies-products-container');
            const cartItemsContainer = document.getElementById('cart-items');
            const cartTotalSpan = document.getElementById('cart-total');
            const checkoutBtn = document.getElementById('checkout-btn');
            const header = document.querySelector('header');
            const backToTopBtn = document.getElementById('back-to-top');
            const loadingSpinner = document.getElementById('loading-spinner');
            const cartCountSpan = document.getElementById('cart-count');

            // Product Quick View Modal Elements
            const productModal = document.getElementById('product-modal');
            const modalCloseBtn = document.querySelector('.modal-close-btn');
            const modalProductImage = document.getElementById('modal-product-image');
            const modalProductName = document.getElementById('modal-product-name');
            const modalProductPrice = document.getElementById('modal-product-price');
            const modalProductDescription = document.getElementById('modal-product-description');
            const modalAddToCartBtn = document.getElementById('modal-add-to-cart-btn');
            const modalQuantityMinusBtn = document.getElementById('modal-quantity-minus');
            const modalQuantityInput = document.getElementById('modal-quantity-input');
            const modalQuantityPlusBtn = document.getElementById('modal-quantity-plus');

            // Custom Confirmation Modal Elements
            const confirmationModal = document.getElementById('confirmation-modal');
            const confirmationMessage = document.getElementById('confirmation-message');
            const confirmYesBtn = confirmationModal.querySelector('.confirm-yes');
            const confirmNoBtn = confirmationModal.querySelector('.confirm-no');
            let confirmActionCallback = null; // Callback function for confirmation

            // Confetti Element
            const confettiContainer = document.getElementById('confetti-container');

            let cart = [];

            // Add to Cart Feedback Element
            const cartFeedback = document.createElement('div');
            cartFeedback.classList.add('cart-feedback');
            document.body.appendChild(cartFeedback);

            // --- Loading Spinner Logic (now only for general page load, not image generation) ---
            const showSpinner = () => {
                if (loadingSpinner) loadingSpinner.classList.remove('hidden');
            };

            const hideSpinner = () => {
                if (loadingSpinner) loadingSpinner.classList.add('hidden');
            };

            // --- Product Rendering Functions ---

            // Function to create HTML for each product item
            const createProductItem = (product) => {
                const productItemDiv = document.createElement('div');
                productItemDiv.classList.add('product-item');
                productItemDiv.dataset.id = product.id;
                productItemDiv.dataset.name = product.name;
                productItemDiv.dataset.price = product.price;
                productItemDiv.dataset.category = product.category;
                productItemDiv.innerHTML = `
                    <img src="${product.img}" alt="${product.name}" onerror="this.onerror=null;this.src='https://placehold.co/150x180/CCCCCC/000000?text=Image+Error';">
                    <h3>${product.name}</h3>
                    <p>${product.description}</p>
                    <span class="price">${product.price} บาท</span>
                    <button class="add-to-cart" data-id="${product.id}">เพิ่มลงตะกร้า</button>
                `;
                return productItemDiv;
            };

            // Intersection Observer for Scroll Reveal
            const observer = new IntersectionObserver((entries, observerInstance) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        if (entry.target.classList.contains('product-item') || entry.target.classList.contains('section-reveal') || entry.target.classList.contains('testimonial-item') || entry.target.classList.contains('speciality-item') || entry.target.classList.contains('feature-item') || entry.target.classList.contains('step-item') || entry.target.classList.contains('full-width-banner')) {
                            const index = Array.from(entry.target.parentNode.children).indexOf(entry.target);
                            entry.target.style.animationDelay = `${index * 0.1}s`;
                            entry.target.classList.add('reveal');
                        }
                        observerInstance.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            // Function to render products with animation
            const renderProductsWithAnimation = (products, container) => {
                if (container) {
                    container.innerHTML = '';
                    products.forEach((product) => {
                        const productItem = createProductItem(product);
                        container.appendChild(productItem);
                        observer.observe(productItem);
                    });
                }
            };

            const renderAllProducts = () => {
                renderProductsWithAnimation(productsData, allProductsContainer);
            };

            const renderFeaturedProducts = () => {
                const featured = productsData.filter(p => p.id === 1 || p.id === 3 || p.id === 4);
                renderProductsWithAnimation(featured, featuredProductsContainer);
            };

            const renderCategoryProducts = (category, container) => {
                const filteredProducts = productsData.filter(product => product.category === category);
                if (filteredProducts.length > 0) {
                    renderProductsWithAnimation(filteredProducts, container);
                } else {
                    if (container) {
                        container.innerHTML = `<p>ไม่มีสินค้าในหมวดหมู่ ${category} ขณะนี้</p>`;
                    }
                }
            };

            // --- Cart Functions ---

            const saveCart = () => {
                localStorage.setItem('bakeryCart', JSON.stringify(cart));
            };

            const loadCart = () => {
                const storedCart = localStorage.getItem('bakeryCart');
                if (storedCart) {
                    cart = JSON.parse(storedCart);
                    renderCart();
                }
            };

            const updateCartCount = () => {
                if (cartCountSpan) {
                    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
                    cartCountSpan.textContent = totalItems;
                    // Add pop animation
                    cartCountSpan.classList.remove('pop-animation'); // Reset animation
                    void cartCountSpan.offsetWidth; // Trigger reflow
                    cartCountSpan.classList.add('pop-animation');
                }
            };

            const renderCart = () => {
                if (!cartItemsContainer || !cartTotalSpan) return;

                cartItemsContainer.innerHTML = '';
                let total = 0;

                if (cart.length === 0) {
                    cartItemsContainer.innerHTML = '<p>ไม่มีสินค้าในตะกร้า</p>';
                } else {
                    cart.forEach(item => {
                        const cartItemDiv = document.createElement('div');
                        cartItemDiv.classList.add('cart-item');
                        cartItemDiv.innerHTML = `
                            <div class="cart-item-info">
                                <h4>${item.name}</h4>
                                <p>ราคา: ${item.price} บาท</p>
                            </div>
                            <div class="cart-item-quantity">
                                <button class="quantity-minus" data-id="${item.id}">-</button>
                                <input type="number" class="quantity-input" value="${item.quantity}" min="1" data-id="${item.id}">
                                <button class="quantity-plus" data-id="${item.id}">+</button>
                            </div>
                            <button class="remove-from-cart" data-id="${item.id}">ลบ</button>
                        `;
                        cartItemsContainer.appendChild(cartItemDiv);
                        total += item.price * item.quantity;
                    });
                }
                cartTotalSpan.textContent = total;
                saveCart();
                updateCartCount(); // Update cart count in header
            };

            // Add to Cart function with feedback
            const addToCart = (productId, productName, productPrice, quantity = 1) => {
                const existingItem = cart.find(item => item.id === productId);

                if (existingItem) {
                    existingItem.quantity += quantity;
                } else {
                    cart.push({
                        id: productId,
                        name: productName,
                        price: productPrice,
                        quantity: quantity
                    });
                }
                renderCart(); // Re-render cart to update total and count
                // Show feedback
                cartFeedback.textContent = `${productName} เพิ่มลงตะกร้าแล้ว!`;
                cartFeedback.classList.add('show');

                setTimeout(() => {
                    cartFeedback.classList.remove('show');
                }, 2000); // Hide Feedback after 2 seconds
            };

            // Event Listener for product item clicks (either add to cart or open modal)
            document.addEventListener('click', (event) => {
                const productItem = event.target.closest('.product-item');
                if (productItem) {
                    const productId = parseInt(productItem.dataset.id);
                    const product = productsData.find(p => p.id === productId);

                    if (!product) return; // Should not happen if data is consistent

                    // If the clicked element is the 'add-to-cart' button within a product-item
                    if (event.target.classList.contains('add-to-cart')) {
                        addToCart(product.id, product.name, product.price);
                        // Add button click animation
                        event.target.classList.add('clicked');
                        event.target.addEventListener('animationend', () => {
                            event.target.classList.remove('clicked');
                        }, { once: true });
                    } else { // If any other part of the product-item is clicked (image, text, etc.)
                        openProductModal(product);
                    }
                }
            });

            // Event Listener for removing/adjusting quantity in cart
            if (cartItemsContainer) {
                cartItemsContainer.addEventListener('click', (event) => {
                    const target = event.target;
                    const productId = parseInt(target.dataset.id);
                    const itemIndex = cart.findIndex(item => item.id === productId);

                    if (itemIndex === -1) return; // Item not found in cart

                    if (target.classList.contains('remove-from-cart')) {
                        // Show custom confirmation modal for removal
                        confirmationMessage.textContent = `คุณแน่ใจหรือไม่ว่าต้องการลบ ${cart[itemIndex].name} ออกจากตะกร้า?`;
                        confirmationModal.style.display = 'flex';
                        confirmActionCallback = () => {
                            cart.splice(itemIndex, 1); // Remove item
                            renderCart();
                            confirmationModal.style.display = 'none';
                        };
                    } else if (target.classList.contains('quantity-minus')) {
                        if (cart[itemIndex].quantity > 1) {
                            cart[itemIndex].quantity--;
                            renderCart();
                        } else {
                            // If quantity becomes 0, ask for confirmation to remove
                            confirmationMessage.textContent = `คุณแน่ใจหรือไม่ว่าต้องการลบ ${cart[itemIndex].name} ออกจากตะกร้า?`;
                            confirmationModal.style.display = 'flex';
                            confirmActionCallback = () => {
                                cart.splice(itemIndex, 1); // Remove if quantity becomes 0
                                renderCart();
                                confirmationModal.style.display = 'none';
                            };
                        }
                    } else if (target.classList.contains('quantity-plus')) {
                        cart[itemIndex].quantity++;
                        renderCart();
                    }
                });

                cartItemsContainer.addEventListener('change', (event) => {
                    const target = event.target;
                    if (target.classList.contains('quantity-input')) {
                        const productId = parseInt(target.dataset.id);
                        const newQuantity = parseInt(target.value);
                        const item = cart.find(item => item.id === productId);

                        if (item && !isNaN(newQuantity) && newQuantity >= 1) {
                            item.quantity = newQuantity;
                            renderCart();
                        } else if (item && newQuantity < 1) {
                            // If quantity becomes less than 1, ask for confirmation to remove
                            confirmationMessage.textContent = `คุณแน่ใจหรือไม่ว่าต้องการลบ ${item.name} ออกจากตะกร้า?`;
                            confirmationModal.style.display = 'flex';
                            confirmActionCallback = () => {
                                cart = cart.filter(item => item.id !== productId); // Remove if quantity < 1
                                renderCart();
                                confirmationModal.style.display = 'none';
                            };
                        }
                    }
                });
            }

            // Custom Confirmation Modal Buttons
            if (confirmYesBtn) {
                confirmYesBtn.addEventListener('click', () => {
                    if (confirmActionCallback) {
                        confirmActionCallback();
                    }
                });
            }

            if (confirmNoBtn) {
                confirmNoBtn.addEventListener('click', () => {
                    confirmationModal.style.display = 'none';
                    // No need to re-render cart here, as the action was not confirmed.
                    // The cart state should remain as it was before the confirmation prompt.
                });
            }

            // Close confirmation modal when clicking outside
            if (confirmationModal) {
                window.addEventListener('click', (event) => {
                    if (event.target === confirmationModal) {
                        confirmationModal.style.display = 'none';
                        // No need to re-render cart here.
                    }
                });
            }


            if (checkoutBtn) {
                checkoutBtn.addEventListener('click', () => {
                    if (cart.length === 0) {
                        confirmationMessage.textContent = 'กรุณาเลือกสินค้าก่อนทำการสั่งซื้อ';
                        confirmationModal.style.display = 'flex';
                        confirmActionCallback = () => {
                            confirmationModal.style.display = 'none';
                            confirmationMessage.textContent = `คุณแน่ใจหรือไม่ว่าต้องการลบสินค้าชิ้นนี้ออกจากตะกร้า?`; // Reset message
                        };
                        return;
                    }
                    // Use custom confirmation for checkout
                    confirmationMessage.textContent = `คุณต้องการสั่งซื้อสินค้าทั้งหมด ${cartTotalSpan.textContent} บาท ใช่หรือไม่?`;
                    confirmationModal.style.display = 'flex';
                    confirmActionCallback = () => {
                        alert('ขอบคุณสำหรับการสั่งซื้อ! คำสั่งซื้อของคุณอยู่ระหว่างดำเนินการ'); // Basic alert for success
                        playConfetti(); // Play confetti animation
                        cart = []; // Clear cart after order
                        renderCart();
                        confirmationModal.style.display = 'none';
                        confirmationMessage.textContent = `คุณแน่ใจหรือไม่ว่าต้องการลบสินค้าชิ้นนี้ออกจากตะกร้า?`; // Reset message
                        // In a real website, order data would be sent to the server here
                    };
                });
            }

            // --- Navigation and Page Display Logic ---

            const showSection = (sectionId) => {
                // Remove 'active' class from all nav links
                navLinks.forEach(link => {
                    link.classList.remove('active');
                });

                // Add 'active' class to the clicked nav link
                const activeLink = document.querySelector(`.nav-link[data-section="${sectionId}"]`);
                if (activeLink) {
                    activeLink.classList.add('active');
                }

                pageSections.forEach(section => {
                    section.classList.remove('active');
                });
                const targetSection = document.getElementById(sectionId);
                if (targetSection) {
                    targetSection.classList.add('active');
                }

                // Render products for the active section if it's a product display section
                if (sectionId === 'home') {
                    renderFeaturedProducts();
                    // Observe other sections on home page for reveal animation
                    document.querySelectorAll('.section-reveal, .testimonial-item, .speciality-item, .feature-item, .step-item, .full-width-banner').forEach(el => {
                        el.classList.remove('reveal'); // Reset animation for re-reveal
                        observer.observe(el);
                    });
                    // Reset carousel caption animation for the current slide
                    const currentCarouselItem = document.querySelector('.carousel-item.active .carousel-caption');
                    if (currentCarouselItem) {
                        currentCarouselItem.style.animation = 'none';
                        void currentCarouselItem.offsetWidth; // Trigger reflow
                        currentCarouselItem.style.animation = 'fadeIn 0.8s ease-out forwards';
                    }

                } else if (sectionId === 'products') {
                    renderAllProducts();
                } else if (sectionId === 'category-cakes') {
                    renderCategoryProducts('cake', cakesProductsContainer);
                } else if (sectionId === 'category-cookies') {
                    renderCategoryProducts('cookie', cookiesProductsContainer);
                } else if (sectionId === 'category-pies') {
                    renderCategoryProducts('pie', piesProductsContainer);
                } else if (sectionId === 'cart') {
                    renderCart();
                }

                // Smooth scroll to the top of the main content area (or specific section)
                const mainContent = document.querySelector('main');
                if (mainContent) {
                    mainContent.scrollIntoView({ behavior: 'smooth', block: 'start' });
                } else {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            };

            navLinks.forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault();
                    const targetSectionId = event.target.dataset.section || event.target.closest('.nav-link').dataset.section; // Handle clicks on children of nav-link
                    if (targetSectionId) {
                        showSection(targetSectionId);
                        history.pushState(null, '', `#${targetSectionId}`);
                    }
                });
            });

            // Handle initial load and URL Hash changes
            const initialSection = window.location.hash ? window.location.hash.substring(1) : 'home';
            showSection(initialSection); // Display section based on URL Hash or 'home'

            // Load cart data
            loadCart();

            // --- Carousel Logic ---
            const carouselInner = document.querySelector('.carousel-inner');
            const carouselItems = document.querySelectorAll('.carousel-item');
            const prevBtn = document.querySelector('.carousel-control-prev');
            const nextBtn = document.querySelector('.carousel-control-next');
            const indicatorsContainer = document.querySelector('.carousel-indicators');

            let currentIndex = 0;
            let autoSlideInterval; // For automatic sliding

            const updateCarousel = () => {
                if (!carouselItems.length || !carouselInner) return;
                const itemWidth = carouselItems[0].clientWidth;
                carouselInner.style.transform = `translateX(${-currentIndex * itemWidth}px)`;

                // Reset and apply fade-in animation to the current caption
                carouselItems.forEach((item, index) => {
                    const caption = item.querySelector('.carousel-caption');
                    if (caption) {
                        caption.style.animation = 'none'; // Reset animation
                        void caption.offsetWidth; // Trigger reflow
                        if (index === currentIndex) {
                            caption.style.animation = 'fadeIn 0.8s ease-out forwards'; // Apply animation
                        }
                    }
                });

                // Update indicators
                if (indicatorsContainer) {
                    indicatorsContainer.innerHTML = '';
                    carouselItems.forEach((_, index) => {
                        const dot = document.createElement('span');
                        dot.classList.add('indicator-dot');
                        if (index === currentIndex) {
                            dot.classList.add('active');
                        }
                        dot.addEventListener('click', () => {
                            currentIndex = index;
                            updateCarousel();
                            resetAutoSlide();
                        });
                        indicatorsContainer.appendChild(dot);
                    });
                }
            };

            const nextSlide = () => {
                currentIndex = (currentIndex + 1) % carouselItems.length;
                updateCarousel();
            };

            const prevSlide = () => {
                currentIndex = (currentIndex - 1 + carouselItems.length) % carouselItems.length;
                updateCarousel();
            };

            const startAutoSlide = () => {
                autoSlideInterval = setInterval(nextSlide, 5000); // Change slide every 5 seconds
            };

            const resetAutoSlide = () => {
                clearInterval(autoSlideInterval);
                startAutoSlide();
            };

            if (carouselInner && carouselItems.length > 0) {
                // Initial setup
                updateCarousel();
                startAutoSlide();

                // Event listeners for controls
                if (prevBtn) {
                    prevBtn.addEventListener('click', () => {
                        prevSlide();
                        resetAutoSlide();
                    });
                }
                if (nextBtn) {
                    nextBtn.addEventListener('click', () => {
                        nextSlide();
                        resetAutoSlide();
                    });
                }

                // Handle window resize to adjust carousel position
                window.addEventListener('resize', () => {
                    updateCarousel();
                });
            }
            // --- End Carousel Logic ---

            // --- Back to Top Button Logic ---
            if (backToTopBtn) {
                // Show/hide button on scroll
                window.addEventListener('scroll', () => {
                    if (window.scrollY > 300) { // Show when scrolled down more than 300px
                        backToTopBtn.classList.add('show');
                    } else {
                        backToTopBtn.classList.remove('show');
                    }
                });

                // Smooth scroll to top when clicked
                backToTopBtn.addEventListener('click', () => {
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                });
            }

            // --- Product Quick View Modal Logic ---
            const openProductModal = (product) => {
                if (!productModal) return;

                // Use the product's img URL directly
                modalProductImage.src = product.img;
                modalProductImage.alt = product.name;
                modalProductName.textContent = product.name;
                modalProductPrice.textContent = `${product.price} บาท`;
                modalProductDescription.textContent = product.description;
                modalAddToCartBtn.dataset.id = product.id; // Set data-id for add to cart button in modal
                modalQuantityInput.value = 1; // Reset quantity to 1

                productModal.style.display = 'flex'; // Show modal
            };

            // Close modal when close button is clicked
            if (modalCloseBtn) {
                modalCloseBtn.addEventListener('click', () => {
                    productModal.style.display = 'none';
                });
            }

            // Close modal when clicking outside of the modal content
            if (productModal) {
                window.addEventListener('click', (event) => {
                    if (event.target === productModal) {
                        productModal.style.display = 'none';
                    }
                });
            }

            // Modal Quantity Selector
            if (modalQuantityMinusBtn) {
                modalQuantityMinusBtn.addEventListener('click', () => {
                    let currentQuantity = parseInt(modalQuantityInput.value);
                    if (currentQuantity > 1) {
                        modalQuantityInput.value = currentQuantity - 1;
                    }
                });
            }
            if (modalQuantityPlusBtn) {
                modalQuantityPlusBtn.addEventListener('click', () => {
                    let currentQuantity = parseInt(modalQuantityInput.value);
                    modalQuantityInput.value = currentQuantity + 1;
                });
            }
            if (modalAddToCartBtn) {
                modalAddToCartBtn.addEventListener('click', (event) => {
                    const productId = parseInt(event.target.dataset.id);
                    const quantity = parseInt(modalQuantityInput.value);
                    const product = productsData.find(p => p.id === productId);

                    if (product && quantity >= 1) {
                        addToCart(product.id, product.name, product.price, quantity);
                        productModal.style.display = 'none'; // Close modal after adding to cart
                    }
                });
            }


            // --- Confetti Animation Logic ---
            const playConfetti = () => {
                if (!confettiContainer) return;

                confettiContainer.style.display = 'block'; // Show confetti container
                confettiContainer.innerHTML = ''; // Clear previous confetti

                const colors = ['#ffb6c1', '#add8e6', '#90ee90', '#ffd700', '#ff69b4']; // Matching theme colors

                for (let i = 0; i < 150; i++) { // Generate 150 confetti pieces
                    const confetti = document.createElement('div');
                    confetti.classList.add('confetti');
                    confetti.style.left = `${Math.random() * 100}vw`; // Random horizontal position
                    confetti.style.top = `${Math.random() * -20}vh`; // Start slightly above viewport
                    confetti.style.animationDelay = `${Math.random() * 2}s`; // Random start delay
                    confetti.style.transform = `rotate(${Math.random() * 360}deg)`; // Random initial rotation
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)]; // Random color
                    confettiContainer.appendChild(confetti);
                }

                setTimeout(() => {
                    confettiContainer.innerHTML = ''; // Clear confetti
                    confettiContainer.style.display = 'none'; // Hide container
                }, 3000); // Confetti lasts for 3 seconds
            };

            // Hide spinner after initial content is rendered
            hideSpinner();

        }); // End DOMContentLoaded
    </script>
</body>
</html>
